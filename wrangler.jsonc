{
  // Cloudflare Workers configuration for Galileo Tax App
  // Frontend deployment with SPA routing support
  "name": "galileo-taxapp",
  "account_id": "10bae1566e72e0e3ed64adcb4adfc9a4",
  "compatibility_date": "2024-07-22",
  "compatibility_flags": ["nodejs_compat"],
  
  // Main worker script (will be generated)
  "main": "./dist/_worker.js",
  
  // Assets configuration for SPA
  "assets": {
    "directory": "./dist",
    "include": ["**/*"],
    "exclude": ["_worker.js"],
    "binding": "ASSETS",
    "html_handling": "auto-trailing-slash",
    "not_found_handling": "single-page-application"
  },
  
  // Environment variables for production
  "vars": {
    "ENVIRONMENT": "production",
    "NODE_ENV": "production",
    "REACT_APP_SUPABASE_URL": "https://ufxwqddayrydbgwaysfw.supabase.co",
    "REACT_APP_SUPABASE_ANON_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmeHdxZGRheXJ5ZGJnd2F5c2Z3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxODE3ODksImV4cCI6MjA2NTc1Nzc4OX0.FRSq5CgQLsaLe4QNBOgvUQFEsXZypZ2Nrg3Mr5Kswpw"
  },
  
  // Build configuration for GitHub deployment
  "build": {
    "command": "npm run build:workers"
  },
  
  // Development configuration
  "dev": {
    "port": 8787,
    "local_protocol": "http",
    "upstream_protocol": "https"
  },
  
  // Environment-specific configurations
  "env": {
    "development": {
      "name": "galileo-taxapp-dev",
      "vars": {
        "ENVIRONMENT": "development",
        "NODE_ENV": "development",
        "REACT_APP_SUPABASE_URL": "http://127.0.0.1:54321",
        "REACT_APP_SUPABASE_ANON_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"
      }
    },
    "staging": {
      "name": "galileo-taxapp-staging",  
      "vars": {
        "ENVIRONMENT": "staging",
        "NODE_ENV": "production",
        "REACT_APP_SUPABASE_URL": "https://ufxwqddayrydbgwaysfw.supabase.co",
        "REACT_APP_SUPABASE_ANON_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmeHdxZGRheXJ5ZGJnd2F5c2Z3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxODE3ODksImV4cCI6MjA2NTc1Nzc4OX0.FRSq5CgQLsaLe4QNBOgvUQFEsXZypZ2Nrg3Mr5Kswpw"
      }
    },
    "production": {
      "name": "galileo-taxapp-prod",
      "vars": {
        "ENVIRONMENT": "production", 
        "NODE_ENV": "production",
        "REACT_APP_SUPABASE_URL": "https://ufxwqddayrydbgwaysfw.supabase.co",
        "REACT_APP_SUPABASE_ANON_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmeHdxZGRheXJ5ZGJnd2F5c2Z3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxODE3ODksImV4cCI6MjA2NTc1Nzc4OX0.FRSq5CgQLsaLe4QNBOgvUQFEsXZypZ2Nrg3Mr5Kswpw",
        "VITE_SUPABASE_URL": "https://ufxwqddayrydbgwaysfw.supabase.co",
        "VITE_SUPABASE_ANON_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmeHdxZGRheXJ5ZGJnd2F5c2Z3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxODE3ODksImV4cCI6MjA2NTc1Nzc4OX0.FRSq5CgQLsaLe4QNBOgvUQFEsXZypZ2Nrg3Mr5Kswpw",
        "VITE_SUPABASE_FUNCTIONS_URL": "https://ufxwqddayrydbgwaysfw.supabase.co/functions/v1",
        "VITE_APP_VERSION": "1.0.0",
        "VITE_PUBLIC_SITE_URL": "https://console.galileo.tax",
        "SMTP_HOST": "smtp.gmail.com",
        "SMTP_PORT": "587",
        "SMTP_SECURE": "true",
        "SMTP_USER": "your-production-smtp-email",
        "SMTP_PASS": "your-production-smtp-password",
        "SMTP_FROM": "no-reply@galileo.tax",
        "WEB3FORMS_KEY": "your-production-web3forms-key",
        "STRIPE_PUBLISHABLE_KEY": "pk_live_your_production_publishable_key",
        "STRIPE_SECRET_KEY": "sk_live_your_production_secret_key",
        "STRIPE_API_KEY": "sk_live_your_production_secret_key"
<<<<<<< HEAD
        
=======
>>>>>>> bf7899f (Security refactor: Move admin auth and OpenAI API calls to secure server-side)
      },
      // Production-specific routes (custom domains)
      // Note: Uncomment when galileo.tax domain is added to Cloudflare
      "routes": [
        { "pattern": "console.galileo.tax/*", "zone_name": "galileo.tax" }
      ],
      "analytics_engine_datasets": [
        {
          "binding": "ANALYTICS",
          "dataset": "galileo_analytics"
        }
      ]
    }
  },
  
  // Worker limits and performance
  // "limits": {
  //   "cpu_ms": 30000
  // },
  
  // Analytics and monitoring
  "analytics_engine_datasets": [
    {
      "binding": "ANALYTICS",
      "dataset": "galileo_analytics"
    }
  ],
  
  // Security headers
  "wrangler": {
    "experimental": {
      "local": true
    } 
  }
}
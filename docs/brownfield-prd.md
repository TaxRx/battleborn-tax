# Brownfield Product Requirements Document (PRD)

**Project**: TaxApp
**Author**: BMad Product Manager
**Created**: 2025-07-08
**Version**: 1.0

## 1. Introduction & Goals

This document outlines the existing functionality of the TaxApp application as of the analysis date. The primary goal is to establish a baseline understanding of the current system to inform future development, starting with the addition of a client-facing portal.

The TaxApp is a multi-faceted system designed to assist admins and affiliates in managing their clients' tax information, with a focus on identifying and calculating tax credits.

## 2. User Personas

Based on the existing documentation and schema, we can identify the following key user roles:

*   **Admin**: The primary power user of the system. Admins can manage clients, businesses, and all associated tax data. They appear to have full CRUD (Create, Read, Update, Delete) access to the entire system.
*   **Affiliate**: An external partner who brings their clients to the TaxApp service. Affiliates are responsible for creating client profiles and uploading their initial data. They have a restricted, read-only view of their own client roster and the high-level status of their clients' cases. They do not perform tax calculations.
*   **Client**: The end-user (an individual or business) whose tax information is being managed. Currently, clients do not have direct access to the system. The new client portal will serve this persona.
*   **Client**: The end-user whose tax information is being managed. Currently, clients do not have direct access to the system. The new client portal will serve this persona.

## 3. Existing Features & Functionality

The following features are understood to be part of the current system:

### 3.1. Centralized Client & Business Management

*   **Client Creation**: Admins can create new clients, including personal information, filing status, and income details.
*   **Business Creation**: Admins can create new businesses associated with clients, including entity type, revenue, and other business details.
*   **Data Association**: The system links clients to their businesses and tracks financial data on a yearly basis for both.

### 3.2. R&D Tax Credit Wizard

*   A specialized tool for calculating R&D tax credits.
*   The wizard appears to guide users through a series of questions to determine eligibility and calculate the credit amount.

### 3.3. Admin Panel

*   A central dashboard for admins to manage all aspects of the system.
*   The panel includes functionality for client management, business management, and likely reporting and analytics.

### 3.4. Affiliate to Admin Workflow

*   A defined workflow for affiliates to interact with the system and manage their clients.
*   The specifics of this workflow are not fully detailed but appear to be a key part of the application's business logic.

## 4. Technical Overview

*   **Backend**: Supabase (PostgreSQL)
*   **Frontend**: React (Vite)
*   **Styling**: Tailwind CSS
*   **Database Schema**: The schema is complex and has undergone several revisions. It includes tables for clients, businesses, personal and business tax years, and various other supporting tables. The database makes extensive use of SQL functions and Row Level Security (RLS) to manage data access.

## 5. Future Development

The next major feature to be added is a client-facing portal. This will require significant new development, including:

*   Client authentication and authorization.
*   A new set of UI components for the client dashboard.
*   Functionality for clients to view, upload, and e-sign documents.
*   Securely displaying reports generated by the admin side.

This PRD will serve as the foundation for designing and building this new functionality.

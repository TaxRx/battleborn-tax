# User Story: Client Portal Secure Report Viewing

**Title:**  
Client Portal – Secure Report Viewing

**As a**  
client (end-user),

**I want to**  
be able to securely view reports generated by admins (e.g., tax credit calculations, summaries) in the portal,

**So that**  
I can stay informed about my tax situation and review important documents online.

---

## Acceptance Criteria

1. **Report Access**
   - Clients can view a list of available reports (e.g., tax credit calculations, summaries) in the portal.
   - Each report entry displays the report type, date generated, and a brief description.
   - Clients can open and view the full report in a secure, read-only format (PDF or HTML).
   - Reports are only accessible to the client they belong to (enforced by RLS).

2. **Security**
   - All report data is transmitted securely (HTTPS).
   - Reports are stored in Supabase Storage or the database with access restricted to the owning client.
   - RLS policies ensure clients cannot access other clients’ reports.

3. **Notifications**
   - Clients receive a notification (in-app or email) when a new report is available.

4. **Error Handling**
   - If a report fails to load, a clear error message is shown with a retry option.
   - In development mode, detailed error messages are displayed for debugging.

5. **Testing**
   - Automated tests cover report listing, viewing, access control, and notifications.

---

## Implementation Notes

- **Frontend:**  
  - Create `Reports.tsx` for listing and viewing reports.
  - Display report metadata and provide secure viewing (PDF/HTML viewer component).
  - Integrate with notification system for new reports.

- **Backend / Database:**  
  - Store reports in Supabase Storage or as database records.
  - Ensure RLS policies restrict report access to the logged-in client.
  - Implement notification logic for new reports (in-app or email). 